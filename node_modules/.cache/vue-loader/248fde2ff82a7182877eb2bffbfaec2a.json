{"remainingRequest":"E:\\vuedemo\\test\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\vuedemo\\test\\src\\components\\SelectFolder.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\vuedemo\\test\\src\\components\\SelectFolder.vue","mtime":1638346541030},{"path":"E:\\vuedemo\\test\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vuedemo\\test\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\vuedemo\\test\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vuedemo\\test\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBtb3ZlRm9sZGVyLCBnZXRGb2xkZXIgfSBmcm9tICIuLi9hcGkvZm9sZGVyIjsNCmltcG9ydCB7IG1vdmVGaWxlIH0gZnJvbSAiLi4vYXBpL2ZpbGUiOw0KZXhwb3J0IGRlZmF1bHQgew0KICAgIGRhdGEoKXsNCiAgICAgICAgcmV0dXJuew0KICAgICAgICAgICAgZGlhbG9nVmlzaWJsZTpmYWxzZSwNCiAgICAgICAgICAgIGxpc3Q6W10sDQogICAgICAgICAgICBtb3ZlSW5mbzpudWxsLA0KICAgICAgICAgICAgY3VycmVudEZvbGRlcklkOm51bGwsDQogICAgICAgICAgICBzZWxlY3RGb2xkZXJJZDpudWxsLA0KICAgICAgICAgICAgZm9sZGVySWRMaXN0OltdDQogICAgICAgIH0NCiAgICB9LA0KICAgIG1ldGhvZHM6ew0KICAgICAgICBjb25maXJtKCl7DQogICAgICAgICAgICBpZighdGhpcy5zZWxlY3RGb2xkZXJJZCl7DQogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign6K+36YCJ5oup5oOz6KaB56e75Yqo6Iez55qE55uu5b2VJykNCiAgICAgICAgICAgICAgICByZXR1cm4NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMubW92ZSh0aGlzLnNlbGVjdEZvbGRlcklkKQ0KICAgICAgICB9LA0KICAgICAgICBhc3luYyBtb3ZlKGZvbGRlcklkKXsNCiAgICAgICAgICAgIGxldCBkYXRhPXsNCiAgICAgICAgICAgICAgICBpZDp0aGlzLm1vdmVJbmZvLmlkLA0KICAgICAgICAgICAgICAgIGZvbGRlcklkDQogICAgICAgICAgICB9DQogICAgICAgICAgICBsZXQgcmVzPXRoaXMubW92ZUluZm8uaXNGb2xkZXIgPyBhd2FpdCBtb3ZlRm9sZGVyKGRhdGEpIDogYXdhaXQgbW92ZUZpbGUoZGF0YSkNCiAgICAgICAgICAgIGlmKHJlcy5jb2RlPT09MCl7DQogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfnp7vliqjmiJDlip8nKQ0KICAgICAgICAgICAgICAgIHRoaXMuJGJ1cy4kZW1pdCgnZ2V0bGlzdCcpDQogICAgICAgICAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlPWZhbHNlDQogICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnbW92ZVN1Y2Nlc3MnKQ0KICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubXNnKQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBpbml0KGluZm8pew0KICAgICAgICAgICAgdGhpcy5tb3ZlSW5mbz1pbmZvDQogICAgICAgICAgICB0aGlzLmdldEZvbGRlckZ1bihudWxsKQ0KICAgICAgICB9LA0KICAgICAgICBnZXRGb2xkZXJGdW4oaWQpew0KICAgICAgICAgICAgZ2V0Rm9sZGVyKGlkKS50aGVuKHJlcz0+ew0KICAgICAgICAgICAgICAgIGlmKHJlcy5jb2RlPT09MCl7DQogICAgICAgICAgICAgICAgICAgIHRoaXMubGlzdD1yZXMuZGF0YQ0KICAgICAgICAgICAgICAgICAgIHRoaXMuZm9sZGVySWRMaXN0Lmxlbmd0aCE9PTAgJiYgdGhpcy5saXN0LnVuc2hpZnQoew0KICAgICAgICAgICAgICAgICAgICAgICAgcmVhbE5hbWU6Jy4uJw0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgIH0sDQogICAgICAgIGNoZWNrQ2hpbGQoaXRlbSl7DQogICAgICAgICAgICBpZih0aGlzLnJlYWxOYW1lPT09Jy4uJyl7DQogICAgICAgICAgICAgICAgdGhpcy5mb2xkZXJJZExpc3QucG9wKCkNCiAgICAgICAgICAgICAgICB0aGlzLmdldEZvbGRlckZ1bih0aGlzLmZvbGRlcklkTGlzdFt0aGlzLmZvbGRlcklkTGlzdC5sZW5ndGgtMV0pDQogICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgICB0aGlzLmZvbGRlcklkTGlzdC5wdXNoKGl0ZW0uaWQpDQogICAgICAgICAgICAgICAgdGhpcy5nZXRGb2xkZXJGdW4oaXRlbS5pZCkNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgc2VsZWN0KGl0ZW0pew0KICAgICAgICAgICAgdGhpcy5zZWxlY3RGb2xkZXJJZD10aGlzLnNlbGVjdEZvbGRlcklkPT09aXRlbS5pZCA/IG51bGwgOiBpdGVtLmlkDQogICAgICAgIH0sDQogICAgfSwNCn0NCg=="},{"version":3,"sources":["SelectFolder.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SelectFolder.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <el-dialog\r\n  title=\"移动\"\r\n  :visible.sync=\"dialogVisible\"\r\n  width=\"20%\">\r\n  <div class=\"folder-list\">\r\n      <div class=\"folder-item\" :class=\"{'selected': item.id===selectFolderId}\" @click=\"select(item)\" @dblclick=\"checkChild(item)\" v-for=\"item in list\" :key=\"item.id\">\r\n          <img src=\"@/assets/img/folder-icon.svg\"/>\r\n          <div class=\"folder-name\">{{item.realName}}</div>\r\n      </div>\r\n  </div>\r\n  <span slot=\"footer\" class=\"dialog-footer\">\r\n    <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n    <el-button type=\"primary\" @click=\"confirm\">确 定</el-button>\r\n  </span>\r\n</el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport { moveFolder, getFolder } from \"../api/folder\";\r\nimport { moveFile } from \"../api/file\";\r\nexport default {\r\n    data(){\r\n        return{\r\n            dialogVisible:false,\r\n            list:[],\r\n            moveInfo:null,\r\n            currentFolderId:null,\r\n            selectFolderId:null,\r\n            folderIdList:[]\r\n        }\r\n    },\r\n    methods:{\r\n        confirm(){\r\n            if(!this.selectFolderId){\r\n                this.$message.error('请选择想要移动至的目录')\r\n                return\r\n            }\r\n            this.move(this.selectFolderId)\r\n        },\r\n        async move(folderId){\r\n            let data={\r\n                id:this.moveInfo.id,\r\n                folderId\r\n            }\r\n            let res=this.moveInfo.isFolder ? await moveFolder(data) : await moveFile(data)\r\n            if(res.code===0){\r\n                this.$message.success('移动成功')\r\n                this.$bus.$emit('getlist')\r\n                this.dialogVisible=false\r\n                this.$emit('moveSuccess')\r\n            }else{\r\n                this.$message.error(res.msg)\r\n            }\r\n        },\r\n        init(info){\r\n            this.moveInfo=info\r\n            this.getFolderFun(null)\r\n        },\r\n        getFolderFun(id){\r\n            getFolder(id).then(res=>{\r\n                if(res.code===0){\r\n                    this.list=res.data\r\n                   this.folderIdList.length!==0 && this.list.unshift({\r\n                        realName:'..'\r\n                    })\r\n                }\r\n            })\r\n        },\r\n        checkChild(item){\r\n            if(this.realName==='..'){\r\n                this.folderIdList.pop()\r\n                this.getFolderFun(this.folderIdList[this.folderIdList.length-1])\r\n            }else{\r\n                this.folderIdList.push(item.id)\r\n                this.getFolderFun(item.id)\r\n            }\r\n        },\r\n        select(item){\r\n            this.selectFolderId=this.selectFolderId===item.id ? null : item.id\r\n        },\r\n    },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.folder-list{\r\n    .folder-item{\r\n        display: flex;\r\n        align-items: center;\r\n        padding: 4px;\r\n        border-radius: 4px;\r\n        cursor: pointer;\r\n        margin-bottom: 4px;\r\n        img{\r\n            width: 30px;\r\n            height: 30px;\r\n            margin-right: 10px;\r\n        }\r\n        &:hover{\r\n            background-color: #e9eaed;\r\n        }\r\n    }\r\n    .selected{\r\n        background-color: #2296f3;\r\n        color: #fff;\r\n        &:hover{\r\n            background-color:#2296f3 ;\r\n            color: #fff;\r\n        }\r\n    }\r\n}\r\n</style>"]}]}