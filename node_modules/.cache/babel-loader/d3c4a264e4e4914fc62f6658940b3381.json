{"remainingRequest":"E:\\workspace\\pan-front\\node_modules\\babel-loader\\lib\\index.js!E:\\workspace\\pan-front\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\workspace\\pan-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\workspace\\pan-front\\src\\components\\DeleteFile.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\workspace\\pan-front\\src\\components\\DeleteFile.vue","mtime":1638991149941},{"path":"E:\\workspace\\pan-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\workspace\\pan-front\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\workspace\\pan-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\workspace\\pan-front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgcmVzdG9yZUZpbGUsIGRlbGV0ZUZpbGUgfSBmcm9tICcuLi9hcGkvcmVjeWNsZSc7CmltcG9ydCBmaWxlVHlwZSBmcm9tICIuLi9jb25zdC9maWxlVHlwZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZHJvcGRvd25MaXN0OiBbewogICAgICAgIHRpdGxlOiAn5oGi5aSNJywKICAgICAgICBjb21tYW5kOiAncmVzdG9yZScKICAgICAgfSwgewogICAgICAgIHRpdGxlOiAn5rC45LmF5Yig6ZmkJywKICAgICAgICBjb21tYW5kOiAnZGVzdHJveScKICAgICAgfV0KICAgIH07CiAgfSwKICBwcm9wczogewogICAgaW5mbzogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVDb21tYW5kOiBmdW5jdGlvbiBoYW5kbGVDb21tYW5kKGNvbW1hbmQpIHsKICAgICAgdGhpc1tjb21tYW5kXSgpOwogICAgfSwKICAgIHJlc3RvcmU6IGZ1bmN0aW9uIHJlc3RvcmUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgZGF0YSA9IHsKICAgICAgICBmaWQ6IHRoaXMuaW5mby5maWQsCiAgICAgICAgaWQ6IHRoaXMuaW5mby5pZCwKICAgICAgICB0eXBlOiB0aGlzLmluZm8udHlwZQogICAgICB9OwogICAgICByZXN0b3JlRmlsZShkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmNvZGUgPT09IDApIHsKICAgICAgICAgIF90aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+aBouWkjeaIkOWKnycpOwoKICAgICAgICAgIF90aGlzLiRidXMuJGVtaXQoJ2dldHJlY3ljbGVsaXN0Jyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZGVzdHJveTogZnVuY3Rpb24gZGVzdHJveSgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgZGF0YSA9IHsKICAgICAgICBmaWQ6IHRoaXMuaW5mby5maWQsCiAgICAgICAgaWQ6IHRoaXMuaW5mby5pZCwKICAgICAgICB0eXBlOiB0aGlzLmluZm8udHlwZQogICAgICB9OwogICAgICBkZWxldGVGaWxlKGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuY29kZSA9PT0gMCkgewogICAgICAgICAgX3RoaXMyLiRtZXNzYWdlLnN1Y2Nlc3MoJ+W9u+W6leWIoOmZpCcpOwoKICAgICAgICAgIF90aGlzMi4kYnVzLiRlbWl0KCdnZXRyZWN5Y2xlbGlzdCcpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpczIuJG1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7fSwKICBjb21wdXRlZDogewogICAgaWNvblR5cGU6IGZ1bmN0aW9uIGljb25UeXBlKCkgewogICAgICBpZiAodGhpcy5pbmZvLnJlbWFyayAhPT0gJycpIHsKICAgICAgICB2YXIgdHlwZSA9IGZpbGVUeXBlW3RoaXMuaW5mby5yZW1hcmtdOwogICAgICAgIHJldHVybiB0eXBlID8gdHlwZSA6ICd1bmtub3duJzsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gJ2ZvbGRlcic7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"sources":["DeleteFile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAkBA,SAAA,WAAA,EAAA,UAAA,QAAA,gBAAA;AACA,OAAA,QAAA,MAAA,mBAAA;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,YAAA,EAAA,CACA;AACA,QAAA,KAAA,EAAA,IADA;AAEA,QAAA,OAAA,EAAA;AAFA,OADA,EAKA;AACA,QAAA,KAAA,EAAA,MADA;AAEA,QAAA,OAAA,EAAA;AAFA,OALA;AADA,KAAA;AAYA,GAdA;AAeA,EAAA,KAAA,EAAA;AACA,IAAA,IAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA;AAFA;AADA,GAfA;AAqBA,EAAA,OAAA,EAAA;AACA,IAAA,aADA,yBACA,OADA,EACA;AACA,WAAA,OAAA;AACA,KAHA;AAIA,IAAA,OAJA,qBAIA;AAAA;;AACA,UAAA,IAAA,GAAA;AACA,QAAA,GAAA,EAAA,KAAA,IAAA,CAAA,GADA;AAEA,QAAA,EAAA,EAAA,KAAA,IAAA,CAAA,EAFA;AAGA,QAAA,IAAA,EAAA,KAAA,IAAA,CAAA;AAHA,OAAA;AAKA,MAAA,WAAA,CAAA,IAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,IAAA,KAAA,CAAA,EAAA;AACA,UAAA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA,MAAA;;AACA,UAAA,KAAA,CAAA,IAAA,CAAA,KAAA,CAAA,gBAAA;AACA,SAHA,MAGA;AACA,UAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,GAAA,CAAA,GAAA;AACA;AACA,OAPA;AAQA,KAlBA;AAmBA,IAAA,OAnBA,qBAmBA;AAAA;;AACA,UAAA,IAAA,GAAA;AACA,QAAA,GAAA,EAAA,KAAA,IAAA,CAAA,GADA;AAEA,QAAA,EAAA,EAAA,KAAA,IAAA,CAAA,EAFA;AAGA,QAAA,IAAA,EAAA,KAAA,IAAA,CAAA;AAHA,OAAA;AAKA,MAAA,UAAA,CAAA,IAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,IAAA,KAAA,CAAA,EAAA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,OAAA,CAAA,MAAA;;AACA,UAAA,MAAA,CAAA,IAAA,CAAA,KAAA,CAAA,gBAAA;AACA,SAHA,MAGA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,KAAA,CAAA,GAAA,CAAA,GAAA;AACA;AACA,OAPA;AAQA;AAjCA,GArBA;AAwDA,EAAA,OAxDA,qBAwDA,CAEA,CA1DA;AA2DA,EAAA,QAAA,EAAA;AACA,IAAA,QADA,sBACA;AACA,UAAA,KAAA,IAAA,CAAA,MAAA,KAAA,EAAA,EAAA;AACA,YAAA,IAAA,GAAA,QAAA,CAAA,KAAA,IAAA,CAAA,MAAA,CAAA;AACA,eAAA,IAAA,GAAA,IAAA,GAAA,SAAA;AACA,OAHA,MAGA;AACA,eAAA,QAAA;AACA;AACA;AARA;AA3DA,CAAA","sourcesContent":["<template>\r\n  <div class=\"recycle-box\">\r\n       <div class=\"operate-box\">\r\n           <el-dropdown @command=\"handleCommand\">\r\n               <div class=\"operate-btn\">\r\n                    <i class=\"el-icon-more\"></i>\r\n               </div>\r\n               <el-dropdown-menu slot=\"dropdown\">\r\n                    <el-dropdown-item v-for=\"item in dropdownList\" :key=\"item.command\" :command=\"item.command\">{{item.title}}</el-dropdown-item>\r\n                </el-dropdown-menu>\r\n           </el-dropdown>\r\n       </div>\r\n       <img :src=\"require(`@/assets/img/${iconType}-icon.svg`)\" class=\"icon\"/>\r\n        <p class=\"name\">{{info.realName}}</p>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { restoreFile,deleteFile } from '../api/recycle';\r\nimport fileType from \"../const/fileType\";\r\nexport default {\r\n    data(){\r\n        return{\r\n             dropdownList:[\r\n                {\r\n                    title:'恢复',\r\n                    command:'restore'\r\n                },\r\n                {\r\n                    title:'永久删除',\r\n                    command:'destroy'\r\n                },\r\n             ]\r\n        }\r\n    },\r\n    props:{\r\n        info:{\r\n            type:Object,\r\n            required:true\r\n        }\r\n    },\r\n    methods:{\r\n        handleCommand(command){\r\n            this[command]()\r\n        },\r\n        restore(){\r\n            let data={\r\n                fid:this.info.fid,\r\n                id:this.info.id,\r\n                type:this.info.type\r\n            }\r\n            restoreFile(data).then(res =>{\r\n                if(res.code===0){\r\n                    this.$message.success('恢复成功')\r\n                    this.$bus.$emit('getrecyclelist')\r\n                }else{\r\n                    this.$message.error(res.msg)\r\n                }\r\n            })\r\n        },\r\n        destroy(){\r\n            let data={\r\n                fid:this.info.fid,\r\n                id:this.info.id,\r\n                type:this.info.type\r\n            }\r\n            deleteFile(data).then(res =>{\r\n                if(res.code === 0){\r\n                    this.$message.success('彻底删除')\r\n                    this.$bus.$emit('getrecyclelist')\r\n                }else{\r\n                    this.$message.error(res.msg)\r\n                }\r\n            })\r\n        }\r\n    },\r\n    mounted(){\r\n        \r\n    },\r\n    computed:{\r\n        iconType(){\r\n            if(this.info.remark !== ''){\r\n                let type=fileType[this.info.remark]\r\n                return type ? type:'unknown'\r\n            }else{\r\n                return 'folder'\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.recycle-box{\r\n    position: relative;\r\n    cursor: pointer;\r\n    margin: 0 20px;\r\n    margin-bottom:10px ;\r\n    display: flex;\r\n    justify-content: center;\r\n    flex-direction: column;\r\n    padding: 15px;\r\n    .icon{\r\n        width: 85px;\r\n        height: 85px;\r\n    }\r\n    .name{\r\n        text-align: center;\r\n        font-size: 14px;\r\n        line-height: 1.5;\r\n        max-width: 90px;\r\n        display: -webkit-box;\r\n        -webkit-line-clamp: 2;\r\n        -webkit-box-orient: vertical;\r\n        overflow: hidden;\r\n        -o-text-overflow: ellipsis;\r\n        text-overflow: ellipsis;\r\n        overflow-wrap: break-word;\r\n        margin-bottom: 2px;\r\n        margin-top: 8px;\r\n\r\n    }\r\n    &:hover{\r\n        background-color: #f5f5f5;\r\n        .operate-box{\r\n            opacity: 1;\r\n        }\r\n    }\r\n    .operate-box{\r\n        opacity: 0;\r\n        position: absolute;\r\n        right: 0;\r\n        top:0;\r\n        .operate-btn{\r\n            display: flex;\r\n            justify-content: center;\r\n            align-items: center;\r\n            width: 36px;\r\n            height :36px;\r\n            border-radius: 12px;\r\n            background-color: #fff;\r\n            i{\r\n                font-size: 20px;\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>"],"sourceRoot":"src/components"}]}