{"remainingRequest":"E:\\workspace\\pan-front\\node_modules\\babel-loader\\lib\\index.js!E:\\workspace\\pan-front\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\workspace\\pan-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\workspace\\pan-front\\src\\components\\SelectFolder.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\workspace\\pan-front\\src\\components\\SelectFolder.vue","mtime":1639081153563},{"path":"E:\\workspace\\pan-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\workspace\\pan-front\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\workspace\\pan-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\workspace\\pan-front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkU6L3dvcmtzcGFjZS9wYW4tZnJvbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IG1vdmVGb2xkZXIsIGdldEZvbGRlciB9IGZyb20gIi4uL2FwaS9mb2xkZXIiOwppbXBvcnQgeyBtb3ZlRmlsZSB9IGZyb20gIi4uL2FwaS9maWxlIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgbGlzdDogW10sCiAgICAgIG1vdmVJbmZvOiBudWxsLAogICAgICBjdXJyZW50Rm9sZGVySWQ6IG51bGwsCiAgICAgIHNlbGVjdEZvbGRlcklkOiBudWxsLAogICAgICBmb2xkZXJJZExpc3Q6IFtdCiAgICB9OwogIH0sCiAgcHJvcHM6IHsKICAgIGlzTW92ZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBjb25maXJtOiBmdW5jdGlvbiBjb25maXJtKCkgewogICAgICAvLyBpZighdGhpcy5zZWxlY3RGb2xkZXJJZCl7CiAgICAgIC8vICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGDor7fpgInmi6nmg7PopoEke3RoaXMubW92ZSA/ICfnp7vliqgnIDogJ+S/neWtmCd96Iez55qE55uu5b2VYCkKICAgICAgLy8gICAgIHJldHVybgogICAgICAvLyB9CiAgICAgIHRoaXMubW92ZSh0aGlzLnNlbGVjdEZvbGRlcklkKTsKICAgIH0sCiAgICBtb3ZlOiBmdW5jdGlvbiBtb3ZlKGZvbGRlcklkKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBkYXRhLCByZXM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5pc01vdmUpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE1OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBkYXRhID0gewogICAgICAgICAgICAgICAgICBpZDogX3RoaXMubW92ZUluZm8uaWQsCiAgICAgICAgICAgICAgICAgIHBpZDogZm9sZGVySWQgfHwgMCwKICAgICAgICAgICAgICAgICAgZm9sZGVySWQ6IGZvbGRlcklkIHx8IDAKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5tb3ZlSW5mby5pc0ZvbGRlcikgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gbW92ZUZvbGRlcihkYXRhKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDExOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMDsKICAgICAgICAgICAgICAgIHJldHVybiBtb3ZlRmlsZShkYXRhKTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0LnQwOwoKICAgICAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gMCkgewogICAgICAgICAgICAgICAgICBfdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfnp7vliqjmiJDlip8nKTsKCiAgICAgICAgICAgICAgICAgIF90aGlzLiRidXMuJGVtaXQoJ2dldGxpc3QnKTsKCiAgICAgICAgICAgICAgICAgIF90aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKCiAgICAgICAgICAgICAgICAgIF90aGlzLiRlbWl0KCdtb3ZlU3VjY2VzcycpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgX3RoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE2OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICBfdGhpcy4kZW1pdCgnc2F2ZUNvbmZpcm0nLCBmb2xkZXJJZCB8fCAwKTsKCiAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBpbml0OiBmdW5jdGlvbiBpbml0KGluZm8pIHsKICAgICAgdGhpcy5tb3ZlSW5mbyA9IGluZm87CiAgICAgIHRoaXMuZ2V0Rm9sZGVyRnVuKG51bGwpOwogICAgfSwKICAgIGdldEZvbGRlckZ1bjogZnVuY3Rpb24gZ2V0Rm9sZGVyRnVuKGlkKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgZ2V0Rm9sZGVyKGlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmNvZGUgPT09IDApIHsKICAgICAgICAgIF90aGlzMi5saXN0ID0gcmVzLmRhdGE7CiAgICAgICAgICBfdGhpczIuZm9sZGVySWRMaXN0Lmxlbmd0aCAhPT0gMCAmJiBfdGhpczIubGlzdC51bnNoaWZ0KHsKICAgICAgICAgICAgcmVhbE5hbWU6ICcuLicKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgY2hlY2tDaGlsZDogZnVuY3Rpb24gY2hlY2tDaGlsZChpdGVtKSB7CiAgICAgIGlmICh0aGlzLnJlYWxOYW1lID09PSAnLi4nKSB7CiAgICAgICAgdGhpcy5mb2xkZXJJZExpc3QucG9wKCk7CiAgICAgICAgdGhpcy5nZXRGb2xkZXJGdW4odGhpcy5mb2xkZXJJZExpc3RbdGhpcy5mb2xkZXJJZExpc3QubGVuZ3RoIC0gMV0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZm9sZGVySWRMaXN0LnB1c2goaXRlbS5pZCk7CiAgICAgICAgdGhpcy5nZXRGb2xkZXJGdW4oaXRlbS5pZCk7CiAgICAgIH0KICAgIH0sCiAgICBzZWxlY3Q6IGZ1bmN0aW9uIHNlbGVjdChpdGVtKSB7CiAgICAgIHRoaXMuc2VsZWN0Rm9sZGVySWQgPSB0aGlzLnNlbGVjdEZvbGRlcklkID09PSBpdGVtLmlkID8gbnVsbCA6IGl0ZW0uaWQ7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["SelectFolder.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <el-dialog\r\n  :title=\"isMove ? '移动' :'保存'\"\r\n  :visible.sync=\"dialogVisible\"\r\n  width=\"20%\">\r\n  <div class=\"folder-list\">\r\n      <div class=\"folder-item\" :class=\"{'selected': item.id===selectFolderId}\" @click=\"select(item)\" @dblclick=\"checkChild(item)\" v-for=\"item in list\" :key=\"item.id\">\r\n          <img src=\"@/assets/img/folder-icon.svg\"/>\r\n          <div class=\"folder-name\">{{item.realName}}</div>\r\n      </div>\r\n  </div>\r\n  <span slot=\"footer\" class=\"dialog-footer\">\r\n    <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n    <el-button type=\"primary\" @click=\"confirm\">确 定</el-button>\r\n  </span>\r\n</el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport { moveFolder, getFolder } from \"../api/folder\";\r\nimport { moveFile } from \"../api/file\";\r\nexport default {\r\n    data(){\r\n        return{\r\n            dialogVisible:false,\r\n            list:[],\r\n            moveInfo:null,\r\n            currentFolderId:null,\r\n            selectFolderId:null,\r\n            folderIdList:[]\r\n        }\r\n    },\r\n    props:{\r\n        isMove:{\r\n            type:Boolean,\r\n            default:true\r\n        }\r\n    },\r\n    methods:{\r\n        confirm(){\r\n            // if(!this.selectFolderId){\r\n            //     this.$message.error(`请选择想要${this.move ? '移动' : '保存'}至的目录`)\r\n            //     return\r\n            // }\r\n            this.move(this.selectFolderId)\r\n        },\r\n        async move(folderId){\r\n            if(this.isMove){\r\n                let data={\r\n                id:this.moveInfo.id,\r\n                pid : folderId || 0,\r\n                folderId : folderId || 0\r\n                }\r\n                let res=this.moveInfo.isFolder ? await moveFolder(data) : await moveFile(data)\r\n                if(res.code===0){\r\n                    this.$message.success('移动成功')\r\n                    this.$bus.$emit('getlist')\r\n                    this.dialogVisible=false\r\n                    this.$emit('moveSuccess')\r\n                }else{\r\n                    this.$message.error(res.msg)\r\n                }\r\n            }else{\r\n                this.$emit('saveConfirm', folderId || 0)\r\n            }\r\n            \r\n        },\r\n        init(info){\r\n            this.moveInfo=info\r\n            this.getFolderFun(null)\r\n        },\r\n        getFolderFun(id){\r\n            getFolder(id).then(res=>{\r\n                if(res.code===0){\r\n                    this.list=res.data\r\n                   this.folderIdList.length!==0 && this.list.unshift({\r\n                        realName:'..'\r\n                    })\r\n                }\r\n            })\r\n        },\r\n        checkChild(item){\r\n            if(this.realName==='..'){\r\n                this.folderIdList.pop()\r\n                this.getFolderFun(this.folderIdList[this.folderIdList.length-1])\r\n            }else{\r\n                this.folderIdList.push(item.id)\r\n                this.getFolderFun(item.id)\r\n            }\r\n        },\r\n        select(item){\r\n            this.selectFolderId=this.selectFolderId===item.id ? null : item.id\r\n        },\r\n    },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.folder-list{\r\n    .folder-item{\r\n        display: flex;\r\n        align-items: center;\r\n        padding: 4px;\r\n        border-radius: 4px;\r\n        cursor: pointer;\r\n        margin-bottom: 4px;\r\n        img{\r\n            width: 30px;\r\n            height: 30px;\r\n            margin-right: 10px;\r\n        }\r\n        &:hover{\r\n            background-color: #e9eaed;\r\n        }\r\n    }\r\n    .selected{\r\n        background-color: #2296f3;\r\n        color: #fff;\r\n        &:hover{\r\n            background-color:#2296f3 ;\r\n            color: #fff;\r\n        }\r\n    }\r\n}\r\n</style>"],"sourceRoot":"src/components"}]}