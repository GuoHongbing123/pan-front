{"remainingRequest":"E:\\vuedemo\\test\\node_modules\\babel-loader\\lib\\index.js!E:\\vuedemo\\test\\src\\utils\\request.js","dependencies":[{"path":"E:\\vuedemo\\test\\src\\utils\\request.js","mtime":1637565237150},{"path":"E:\\vuedemo\\test\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vuedemo\\test\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOyAvLyBpbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZScKCmltcG9ydCByb3V0ZXIgZnJvbSAnQC9yb3V0ZXInOwp2YXIgYmFzZVVSTCA9IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAicHJvZHVjdGlvbiIgPyAiL3Byb3h5QXBpIiA6ICIiOwp2YXIgcmVxdWVzdCA9IGF4aW9zLmNyZWF0ZSh7CiAgYmFzZVVSTDogYmFzZVVSTCwKICB0aW1lb3V0OiAxMDAwMCwKICB3aXRoQ3JlZGVudGlhbHM6IHRydWUKfSk7CnJlcXVlc3QuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICB2YXIgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKTsKCiAgaWYgKHRva2VuKSB7CiAgICBjb25maWcuaGVhZGVyc1sidG9rZW4iXSA9IHRva2VuOyAvLyAKICB9CgogIHJldHVybiBjb25maWc7Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOwpyZXF1ZXN0LmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgdmFyIHJlcyA9IHJlc3BvbnNlLmRhdGE7CgogIGlmIChyZXMuY29kZSAhPT0gNDAxKSB7CiAgICByZXR1cm4gcmVzOwogIH0gZWxzZSB7CiAgICByb3V0ZXIucmVwbGFjZSgnL2xvZ2luJyk7CiAgfQp9LCBmdW5jdGlvbiAoZXJyKSB7CiAgcmV0dXJuIGVycjsKfSk7CmV4cG9ydCBkZWZhdWx0IHJlcXVlc3Q7"},{"version":3,"sources":["E:/vuedemo/test/src/utils/request.js"],"names":["axios","router","baseURL","process","env","NODE_ENV","request","create","timeout","withCredentials","interceptors","use","config","token","localStorage","getItem","headers","error","Promise","reject","response","res","data","code","replace","err"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB,C,CACA;;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,IAAMC,OAAO,GAAGC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,WAAxC,GAAsD,EAAtE;AACA,IAAMC,OAAO,GAAGN,KAAK,CAACO,MAAN,CAAa;AACzBL,EAAAA,OAAO,EAAPA,OADyB;AAEzBM,EAAAA,OAAO,EAAE,KAFgB;AAGzBC,EAAAA,eAAe,EAAE;AAHQ,CAAb,CAAhB;AAKAH,OAAO,CAACI,YAAR,CAAqBJ,OAArB,CAA6BK,GAA7B,CACI,UAAAC,MAAM,EAAI;AACN,MAAIC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAZ;;AACA,MAAIF,KAAJ,EAAW;AACPD,IAAAA,MAAM,CAACI,OAAP,CAAe,OAAf,IAA0BH,KAA1B,CADO,CACyB;AACnC;;AACD,SAAOD,MAAP;AACH,CAPL,EAQI,UAAAK,KAAK,EAAI;AACL,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACH,CAVL;AAYAX,OAAO,CAACI,YAAR,CAAqBU,QAArB,CAA8BT,GAA9B,CAAkC,UAACS,QAAD,EAAc;AAC5C,MAAMC,GAAG,GAAGD,QAAQ,CAACE,IAArB;;AACA,MAAID,GAAG,CAACE,IAAJ,KAAa,GAAjB,EAAsB;AAClB,WAAOF,GAAP;AACH,GAFD,MAEO;AACHpB,IAAAA,MAAM,CAACuB,OAAP,CAAe,QAAf;AACH;AACJ,CAPD,EAOG,UAACC,GAAD,EAAS;AACR,SAAOA,GAAP;AACH,CATD;AAUA,eAAenB,OAAf","sourcesContent":["import axios from 'axios'\r\n// import store from '@/store'\r\nimport router from '@/router'\r\nconst baseURL = process.env.NODE_ENV !== \"production\" ? \"/proxyApi\" : \"\"\r\nconst request = axios.create({\r\n    baseURL,\r\n    timeout: 10000,\r\n    withCredentials: true\r\n});\r\nrequest.interceptors.request.use(\r\n    config => {\r\n        let token = localStorage.getItem('token')\r\n        if (token) {\r\n            config.headers[\"token\"] = token // \r\n        }\r\n        return config\r\n    },\r\n    error => {\r\n        return Promise.reject(error)\r\n    }\r\n)\r\nrequest.interceptors.response.use((response) => {\r\n    const res = response.data;\r\n    if (res.code !== 401) {\r\n        return res\r\n    } else {\r\n        router.replace('/login')\r\n    }\r\n}, (err) => {\r\n    return err\r\n});\r\nexport default request;\r\n"]}]}